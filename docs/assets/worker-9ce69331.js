var F=Object.defineProperty;var I=(h,l,e)=>l in h?F(h,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[l]=e;var d=(h,l,e)=>(I(h,typeof l!="symbol"?l+"":l,e),e);(function(){"use strict";const l=["E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atan2","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","hypot","imul","log","log10","log1p","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].join(", ");onmessage=function(n){const{grid:t,t:o,userCode:r}=n.data,u=[];try{const f=new Function("x","y","t","noise",`"use strict"; const { ${l} } = Math; return ${r};`);for(const a of t){const{x:i,y:A}=a;let s=0;s=f(i,A,o,(c,M)=>(_(c/10,M/10)+1)/2),typeof s!="number"&&postMessage({error:"Return value is not a number"}),s=Math.max(Math.min(s,1),0),u.push(s)}postMessage({data:u})}catch(f){postMessage({error:f.message})}};class e{constructor(t,o,r){d(this,"x");d(this,"y");d(this,"z");d(this,"dot2",(t,o)=>this.x*t+this.y*o);d(this,"dot3",(t,o,r)=>this.x*t+this.y*o+this.z*r);this.x=t,this.y=o,this.z=r}}let R=[new e(1,1,0),new e(-1,1,0),new e(1,-1,0),new e(-1,-1,0),new e(1,0,1),new e(-1,0,1),new e(1,0,-1),new e(-1,0,-1),new e(0,1,1),new e(0,-1,1),new e(0,1,-1),new e(0,-1,-1)],P=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],g=new Array(512),w=new Array(512);(function(n){n>0&&n<1&&(n*=65536),n=Math.floor(n),n<256&&(n|=n<<8);for(let t=0;t<256;t++){let o;t&1?o=P[t]^n&255:o=P[t]^n>>8&255,g[t]=g[t+256]=o,w[t]=w[t+256]=R[o%12]}})(0);let U=.5*(Math.sqrt(3)-1),p=(3-Math.sqrt(3))/6;const _=function(n,t){let o,r,u,f=(n+t)*U,a=Math.floor(n+f),i=Math.floor(t+f),A=(a+i)*p,s=n-a+A,c=t-i+A,M,L;s>c?(M=1,L=0):(M=0,L=1);let E=s-M+p,b=c-L+p,z=s-1+2*p,G=c-1+2*p;a&=255,i&=255;let j=w[a+g[i]],q=w[a+M+g[i+L]],v=w[a+1+g[i+1]],m=.5-s*s-c*c;m<0?o=0:(m*=m,o=m*m*j.dot2(s,c));let x=.5-E*E-b*b;x<0?r=0:(x*=x,r=x*x*q.dot2(E,b));let y=.5-z*z-G*G;return y<0?u=0:(y*=y,u=y*y*v.dot2(z,G)),70*(o+r+u)}})();
